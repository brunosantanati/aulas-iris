<html>
    <head>
        <title>Super Trunfo</title>
    </head>

    <body>
        <script>

            let todasCartas = [
                { nome: "Pinguim", forca: 5, habilidade: 50, velocidade: 3, poderes: 5, poderDeCura: 10 },
                { nome: "Era Venenosa", forca: 5, habilidade: 60, velocidade: 4, poderes: 15, poderDeCura: 25 },
                { nome: "Espantalho", forca: 10, habilidade: 50, velocidade: 5, poderes: 5, poderDeCura: 10 },
                { nome: "Charada", forca: 10, habilidade: 60, velocidade: 5, poderes: 5, poderDeCura: 10 },
                { nome: "Flash", forca: 20, habilidade: 100, velocidade: 20, poderes: 40, poderDeCura: 80},
                { nome: "Cyborg", forca: 25, habilidade: 70, velocidade: 10, poderes: 35, poderDeCura: 65 },
                { nome: "Super Homem", forca: 50, habilidade: 95, velocidade: 20, poderes: 45, poderDeCura: 80 },
                { nome: "Mulher Maravilha", forca: 45, habilidade: 90, velocidade: 18, poderes: 45, poderDeCura: 80 },
                { nome: "Mulher Gato", forca: 10, habilidade: 85, velocidade: 7, poderes: 5, poderDeCura: 15 },
                { nome: "Gavião Negro", forca: 20, habilidade: 70, velocidade: 17, poderes: 30, poderDeCura: 65 },
                { nome: "Arqueiro Verde", forca: 10, habilidade: 80, velocidade: 8, poderes: 10, poderDeCura: 30 },
                { nome: "Capitão Átomo", forca: 25, habilidade: 65, velocidade: 14, poderes: 25, poderDeCura: 30 },
                { nome: "Sinestro", forca: 35, habilidade: 70, velocidade: 17, poderes: 35, poderDeCura: 50 },
                { nome: "Apocalypse", forca: 50, habilidade: 55, velocidade: 17, poderes: 45, poderDeCura: 75 },
                { nome: "Shazam", forca: 45, habilidade: 70, velocidade: 19, poderes: 40, poderDeCura: 75 },
                { nome: "Katana", forca: 10, habilidade: 80, velocidade: 7, poderes: 10, poderDeCura: 25 },
                { nome: "Crocodilo", forca: 20, habilidade: 60, velocidade: 3, poderes: 25, poderDeCura: 60 },
                { nome: "General Zod", forca: 45, habilidade: 90, velocidade: 18, poderes: 45, poderDeCura: 80 },
                { nome: "Aquaman", forca: 35, habilidade: 90, velocidade: 17, poderes: 40, poderDeCura: 65 },
                { nome: "Exterminador", forca: 20, habilidade: 85, velocidade: 8, poderes: 10, poderDeCura: 35 }
            ]

            let minhasCartas = []
            let cartasDaMaquina = []

            function distribuirCartas(){
                for(let i=0; i < todasCartas.length; i++){
                    if(i % 2){
                        minhasCartas.push(todasCartas[i])
                    }else{
                        cartasDaMaquina.push(todasCartas[i])
                    }
                }
            }

            function mostrarMinhaCarta(minhaCarta){
                alert('SUA CARTA\n\n' + 
                    'nome: ' + minhaCarta.nome + '\n' +
                    'força: ' + minhaCarta.forca + '\n' +
                    'habilidade: ' + minhaCarta.habilidade + '\n' +
                    'velocidade: ' + minhaCarta.velocidade + '\n' +
                    'poderes: ' + minhaCarta.poderes + '\n' +
                    'poder de cura: ' + minhaCarta.poderDeCura + '\n')
            }

            function pegarEntradaUsuario(){
                let numero = prompt("Escolha a característica desejada:\n" + 
                    "1 - força\n" +
                    "2 - habilidade\n" +
                    "3 - velocidade\n" +
                    "4 - poderes\n"   +
                    "5 - poder de cura\n");

                if(numero == null){
                    return null
                }

                let caracteristica = ''
                let matrizCaracteristicas = [
                    ['1', 'forca'],
                    ['2', 'habilidade'],
                    ['3', 'velocidade'],
                    ['4', 'poderes'],
                    ['5', 'poderDeCura']
                ]

                for(let i=0; i < matrizCaracteristicas.length; i++){
                    for(let j=0; j < matrizCaracteristicas.length; j++){
                        if(numero == matrizCaracteristicas[i][j]){
                            caracteristica = matrizCaracteristicas[i][j+1]
                        }
                    }
                }

                return caracteristica
            }

            function pegarNomesDasCartas(cartas){
                return cartas.map((carta) => {
                    return carta.nome
                })
            }

            function moverCartasParaOGanhador(cartasGanhador, cartasPerdedor, minhaCarta, cartaMaquina){
                cartasGanhador.push(minhaCarta)
                cartasGanhador.push(cartaMaquina)
                cartasGanhador.splice(0, 1)
                cartasPerdedor.splice(0, 1)
            }

            function iniciarJogo(){

                distribuirCartas()

                while(minhasCartas.length > 0 && cartasDaMaquina.length > 0){

                    let minhaCarta = minhasCartas[0]
                    let cartaMaquina = cartasDaMaquina[0]

                    mostrarMinhaCarta(minhaCarta)

                    let caracteristica = pegarEntradaUsuario()

                    if(caracteristica != null){

                        let valorCaracteristica = minhaCarta[caracteristica]
                        let valorCaracteristicaMaquina = cartaMaquina[caracteristica]

                        document.write("###################################################")
                        document.write("<br>")
                        document.write("Característica escolhida: " + caracteristica)
                        document.write("<br>")
                        document.write("<br>")
                        document.write("Meu personagem: ")
                        document.write("<br>")
                        document.write("Nome " + minhaCarta.nome)
                        document.write("<br>")
                        document.write(caracteristica + " " + valorCaracteristica)
                        document.write("<br>")
                        document.write("<br>")
                        document.write("Personagem da máquina: ")
                        document.write("<br>")
                        document.write("Nome " + cartaMaquina.nome)
                        document.write("<br>")
                        document.write(caracteristica + " " + valorCaracteristicaMaquina)
                        document.write("<br>")
                        document.write("<br>")

                        if(valorCaracteristica > valorCaracteristicaMaquina){
                            alert('Você venceu essa rodada')
                            moverCartasParaOGanhador(minhasCartas, cartasDaMaquina, minhaCarta, cartaMaquina)
                        }else if (valorCaracteristicaMaquina > valorCaracteristica){
                            alert('Você perdeu essa rodada')
                            moverCartasParaOGanhador(cartasDaMaquina, minhasCartas, minhaCarta, cartaMaquina)
                        }else{
                            //essa regra depois podemos mudar para deixar igual do jogo original
                            alert('Empatou, movendo cartas para o final do baralho.')
                            minhasCartas.push(minhaCarta)
                            cartasDaMaquina.push(cartaMaquina)
                            cartasDaMaquina.splice(0, 1)
                            minhasCartas.splice(0, 1)
                        }

                        let nomesMinhasCartas = pegarNomesDasCartas(minhasCartas)
                        let nomesCartasDaMaquina = pegarNomesDasCartas(cartasDaMaquina)

                        document.write("Minhas cartas: " + nomesMinhasCartas)
                        document.write("<br>")
                        document.write("Cartas da máquina: " + nomesCartasDaMaquina)
                        document.write("<br>")
                        document.write("<br>")
                    }

                }
                if (minhasCartas.length == 0){
                    alert("você perdeu o jogo!")
                }else {
                    alert("você ganhou!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!o jogo.")
                }                       
            }

            iniciarJogo()
        </script>
    </body>

</html>